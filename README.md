–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π API –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –∑–¥–∞–Ω–∏–π –∏ –≤–∏–¥–æ–≤ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é FastAPI, SQLAlchemy (async) –∏ PostgreSQL.

## üìë –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

* **FastAPI** ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
* **SQLAlchemy (async)** ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
* **Alembic** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ —Å—Ö–µ–º—ã
* **PostgreSQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
* **Poetry** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
* **Docker & Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
* **Pydantic-Settings** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ `.env`

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:

   ```bash
   git clone <url>
   cd orgs_api
   ```

2. **–°–æ–∑–¥–∞—Ç—å `.env`**:

   ```ini
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=postgres
   POSTGRES_DB=mydb

   DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/mydb
   API_KEYS=key1,key2,key3
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose**:

   ```bash
   docker-compose up --build
   ```

   * –°–µ—Ä–≤–∏—Å `db` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç `db/init.sql`.
   * –°–µ—Ä–≤–∏—Å `api` —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ `http://localhost:8000`.

4. **–ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic**:

   * –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

     ```bash
     alembic revision --autogenerate -m "–æ–ø–∏—Å–∞–Ω–∏–µ"
     ```
   * –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:

     ```bash
     alembic upgrade head
     ```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger:** `http://localhost:8000/docs`

### –ó–∞–≥–æ–ª–æ–≤–∫–∏

–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

```
X-API-KEY: <–≤–∞—à_–∫–ª—é—á>
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

* –ü–æ–ª—É—á–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ ID:

  ```http
  GET /organizations/{id}
  ```

* –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏:

  ```http
  GET /organizations?name=–ö–æ–ø—ã—Ç–∞
  ```

* –°–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –≤ –∑–¥–∞–Ω–∏–∏:

  ```http
  GET /organizations/by-building/{building_id}
  ```

* –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –≤–∏–¥—É –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (ID):

  ```http
  GET /organizations/by-activity/{activity_id}
  ```

* –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≤–∏–¥–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

  ```http
  GET /organizations/by-activity/?activity_name=–ï–¥–∞
  ```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `src/config.py`:

* `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
* `API_KEYS` ‚Äî –Ω–∞–±–æ—Ä –≤–∞–ª–∏–¥–Ω—ã—Ö API-–∫–ª—é—á–µ–π (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –≤ `.env`)

## ‚öôÔ∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ Poetry:

```toml
[tool.poetry.dependencies]
fastapi = "^0.100.0"
uvicorn = { extras = ["standard"], version = "^0.23.0" }
sqlalchemy = { version = "^2.0", extras = ["asyncio"] }
asyncpg = "^0.27.0"
pydantic-settings = "^2.0"
python-dotenv = "^1.0"
[...]
```

## üìù –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

* –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ `logs/` (–ø—É—Ç—å –∑–∞–¥–∞—ë—Ç—Å—è –≤ `logger.py`).
* SQL-–∑–∞–ø—Ä–æ—Å—ã –≤–∏–¥–Ω—ã, –µ—Å–ª–∏ `echo=True` —É `create_async_engine()`.

---
